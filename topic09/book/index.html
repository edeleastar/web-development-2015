 <!DOCTYPE html>
 <html>
   <head>

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/solarized_light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

      <style>


body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}

.credits
{
  min-height:20px;
}
    </style>

  </head>

  <body>

  <div class="ui container">
<style>


code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom: thin solid black;
}
h2
{
  font-size:110%;
  border-bottom: thin solid black;
}
h3
{
  font-size:100%;
  border-bottom: thin solid black;
}

</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <a href="../index.html">
      <i class="sitemap icon"></i>
      Deployment
    </a>
  </header>
  <div class="right tab-menu menu">
    <a class="active item" data-tab="Lab-09">
        Lab-09
    </a>
      <a class="item" data-tab="01">
        01
      </a>
      <a class="item" data-tab="02">
        02
      </a>
      <a class="item" data-tab="03">
        03
      </a>
      <a class="item" data-tab="04">
        04
      </a>
      <a class="item" data-tab="05">
        05
      </a>
      <a class="item" data-tab="06">
        06
      </a>
      <a class="item" data-tab="Exercises">
        Exercises
      </a>
    </div>
</div>

<br><br>

  <div  class="ui tab segment lab" data-tab="Lab-09">
    <h1>Objectives</h1>
<p>Install software tools to serve a web site locally and also to deploy the web site to a public web server.</p>
  </div>
  <div  class="ui tab segment lab" data-tab="01">
    <h1>Command Prompt</h1>
<p>Open a command prompt on Windows. The easiest way to do this is in Windows 7 to type 'cmd' in the Search Box on the Windows start menu:</p>
<p><img alt="" src="img/14.png"></p>
<p>When you type it, the start menu might change to the following:</p>
<p><img alt="" src="img/15.png"></p>
<p>...and if you press return, then the command window itself will appear:</p>
<p><img alt="" src="img/16.png"></p>
<p>On Windows 8 and 10, access the desktop from the home screen, and run File Explorer (may be in the toolbar). Then select File-&gt;Open Command Prompt:</p>
<p><img alt="" src="img/01a.png"></p>
  </div>
  <div  class="ui tab segment lab" data-tab="02">
    <h1>Command Line</h1>
<p>This is an alternative interface to Windows which it is important to become familiar with. In this window you can type what are sometimes called 'DOS' commands. These commands let you have a finer level of control of your PC, and are particularly important for programmers to master.</p>
<p>Here are some simple commands:</p>
<ul>
<li>dir<ul>
<li>list all files in a directory</li>
</ul>
</li>
<li>cd ..<ul>
<li>change to a parent directory</li>
</ul>
</li>
<li>cd \<directory name><ul>
<li>change to a specific directory</li>
</ul>
</li>
</ul>
<p>It is essential that you become adept at these commands, and a few others.</p>
<p>Bear in mind that these commands always have a 'current directory' in mind (a directory is another name for a folder). Try them now and see if you can 'navigate' to your web development workspace. For instance, if the folder is located as shown here:</p>
<p><img alt="" src="img/17.png"></p>
<p>Then the commands to get there will look like this:</p>
<p><img alt="" src="img/18.png"></p>
<p>If your workspace is located on another drive, the enter that drive letter first - say "G:", press return, and then try the cd and dir commands.</p>
<p><img alt="" src="img/19.png"></p>
<p>Note in all of the above that the 'prompt' in the command window is always showing the 'current' drive/directory.</p>
<p>Also, if you have a 'space' in your directory (a bad idea generally), then you will have to use quotation marks in the commands. Here is an example:</p>
<p><img alt="" src="img/20.png"></p>
<p>See in the above transcript that the directory name is "Web Development Workspace" - and it has been enclosed in double quotes.</p>
<p>In general, however, it is best to adopt the following conventions.</p>
<ul>
<li>
<p>Never use spaces in directory or file names</p>
</li>
<li>
<p>Never use upper case in directory or file names</p>
</li>
<li>
<p>If you wish to use readable multiple words for a directory or file name, separate the words with '-'. e.g.</p>
<ul>
<li>web-development</li>
<li>java-projects</li>
</ul>
</li>
</ul>
<p>Perhaps you might take this opportunity to adjust your workspace and projects to adopt the above conventions. If you do, then you will find that using DOS commands to navigate your folders will be considerably easier.</p>
<p>Before going on to the next step, make sure you are comfortable navigating in DOS around the file system, and in particular make sure you can navigate to your web development workspace.</p>
  </div>
  <div  class="ui tab segment lab" data-tab="03">
    <h1>Serving - IT Labs</h1>
<p>To date you have been opening the web pages you have designed by locating them on your PC and opening the browser directly. This is adequate for simple pages, but does not accurately reproduce how the page/site will be browsed when it is deployed on the public Internet.</p>
<p>To reproduce this experience, we will need to install a <code>web server</code> on our workstations, start this server and have it make our site available in a simulated network. Some server tools can also help simplify the work flow of deploying our site to a public server so that it is accessible globally. We will attempt both in this lab.</p>
<p>This step will cover serving a site using:</p>
<ul>
<li>the PCs in the IT Labs</li>
<li>your own PC, if it is running windows</li>
</ul>
<p>If you have a mac or a windows PC, the next step covers an alternative, complimentary method. However, even if you have your own laptop/mac with you - do this step first on the machines in the IT lab, as the tools require a reliable Internet connection.</p>
<p>Onto your root of your G: drive, download this archive here </p>
<ul>
<li><a href="https://dl.dropboxusercontent.com/u/2068306/node.zip">node.zip</a></li>
</ul>
<p>Unzip the archive to the root of G: drive. Make double sure the folder is in the root of G: drive.</p>
<p>Open a Command Prompt (see last step) and set G: do be your default drive:</p>
<pre><code>C:\MyDocuments&gt; G:
G:\&gt;
</code></pre>

<p>Then type the following command:</p>
<pre><code>G:\&gt; \node\init

</code></pre>

<p>Now type the following (first line only):</p>
<pre><code>G:\&gt; harp init demo
Downloading boilerplate: https://github.com/harp-boilerplates/default
Initialized project at /Users/edeleastar/repos/modules/web/bsc-2015/prj/demo
</code></pre>

<p>Then enter (first line only again):</p>
<pre><code>G:\&gt; cd demo
G:\demo&gt; harp server
------------
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------
</code></pre>

<p>Now browse to this url here:</p>
<ul>
<li><a href="http://localhost:9000">http://localhost:9000</a></li>
</ul>
<p>and you should see this page:</p>
<p><img alt="" src="img/21.png"></p>
<p>To stop 'serving' the page, enter Ctrl-C in the command prompt:</p>
<pre><code>G:\demo&gt; harp server
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------
^C
Terminate batch job (Y/N)? y
G:\&gt;
</code></pre>
  </div>
  <div  class="ui tab segment lab" data-tab="04">
    <h1>Serving - Personal PCs</h1>
<h2>Windows PC</h2>
<p>If you have your own PC - then the last step should also work. You may not have a G: drive, so use the C: drive but follow the same commands as in the last step.</p>
<h2>Mac</h2>
<p>If you have a Mac - then you need to do the following:</p>
<p>Install Node on MAC:</p>
<ul>
<li><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li>
</ul>
<p>Install harp.js</p>
<ul>
<li><a href="http://harpjs.com/">http://harpjs.com/</a></li>
</ul>
<p>The procedure for both of the above should be relatively straightforward.</p>
<p>Once these tools are installed, then from a terminal you should be able to :</p>
<pre><code>$ harp init demo
Downloading boilerplate: https://github.com/harp-boilerplates/default
Initialized project at /Users/edeleastar/repos/modules/web/bsc-2015/prj/demo
$ cd demo
$ harp server
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------
</code></pre>

<p>Now browse to this url here:</p>
<ul>
<li><a href="http://localhost:9000">http://localhost:9000</a></li>
</ul>
<p>and you should see this page:</p>
<p><img alt="" src="img/21.png"></p>
<p>To stop 'serving' the page, enter Ctrl-C in the command prompt:</p>
<pre><code>G:\demo&gt; harp server
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------
^C
$ 
</code></pre>

<h1>Surge on a Mac</h1>
<p>With node and harp installed - you will need to install:</p>
<ul>
<li><a href="https://surge.sh/">https://surge.sh/</a></li>
</ul>
<p>The simplest way to do this is to open a terminal and enter:</p>
<pre><code>sudo npm install --global surge
</code></pre>

<p>If successful, the terminal will look something like this:</p>
<pre><code>/usr/local/bin/surge -&gt; /usr/local/lib/node_modules/surge/lib/cli.js
surge@0.17.0 /usr/local/lib/node_modules/surge
├── url-parse-as-address@1.0.0
├── surge-ignore@0.2.0
├── is-domain@0.0.1
├── netrc@0.1.4
├── progress@1.1.8
├── moniker@0.1.2
├── minimist@1.1.1
├── read@1.0.5 (mute-stream@0.0.5)
├── split@0.3.1 (through@2.3.8)
├── du@0.1.0 (async@0.1.22)
├── fstream-ignore@1.0.2 (inherits@2.0.1, minimatch@2.0.10, fstream@1.0.8)
├── tar@1.0.0 (inherits@2.0.1, block-stream@0.0.8, fstream@1.0.8)
├── tar.gz@0.1.1 (commander@1.1.1, tar@0.1.20, fstream@0.1.31)
├── request@2.40.0 (aws-sign2@0.5.0, forever-agent@0.5.2, tunnel-agent@0.4.1, oauth-sign@0.3.0, stringstream@0.0.5, json-stringify-safe@5.0.1, qs@1.0.2, node-uuid@1.4.3, mime-types@1.0.2, tough-cookie@2.2.0, form-data@0.1.4, http-signature@0.10.1, hawk@1.1.1)
└── prompt@0.2.14 (revalidator@0.1.8, pkginfo@0.3.1, utile@0.2.1, winston@0.8.3)
</code></pre>
  </div>
  <div  class="ui tab segment lab" data-tab="05">
    <h1>Deploying a Web Site using Surge</h1>
<p>Create a new project com the command line by entering the following:</p>
<pre><code>harp init iot-web
</code></pre>

<p>Remember, make sure to keep an eye on which folder this command is executed from. Opening the folder should reveal these files:</p>
<p><img alt="" src="img/22.png"></p>
<p>We will use files like these later - but for the moment delete all of these files and replace them with the following file called <code>harp.json</code>:</p>
<h2>harp.json</h2>
<pre><code>{
  &quot;globals&quot;: 
  {

  }
}
</code></pre>

<p>If you havent already downloaded it - get the last version of the IoT web site from the last lab:</p>
<ul>
<li>Download Archive: <a href="https://github.com/wit-computing/iot-web/releases/tag/V07">https://github.com/wit-computing/iot-web/releases/tag/V07</a></li>
</ul>
<p>Unzip the project, and copy the <code>public</code> folder into the iot-web folder you have just created. Your <code>iot-web</code> folder should look like this:</p>
<p><img alt="" src="img/23.png"></p>
<p>Now we will <code>serve</code> the web site locally with this command:</p>
<pre><code>G:&gt; cd iot-web
G:\iot-web&gt; harp server
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
</code></pre>

<p>Notice that the command is executed form within the <code>iot-web</code> directory.</p>
<p>Verify that the site is available here:</p>
<ul>
<li><a href="http://localhost:9000/">http://localhost:9000/</a></li>
</ul>
<p>Terminate the server again with ^C:</p>
<pre><code>Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
Terminate batch job (Y/N)? y
^C
G:\iot-web&gt;
</code></pre>

<p>From still within the <code>iot-folder</code>, enter the following command:</p>
<pre><code>G:\iot-web&gt; surge
    Welcome to Surge!
    Please login or create an account by entering your email and password:
</code></pre>

<p>Enter credential to create a new account now - be sure to remember the password. Surge will then deploy the site to a public server:</p>
<pre><code>  project path: G:\dev\iot-web\
               size: 34 files, 2.3 MB
             domain: dull-pet.surge.sh
             upload: [====================] 100%, eta: 0.0s
   propagate on CDN: [====================] 100%
               plan: Free
              users: youremail@domain.com
         IP address: 192.241.214.148

    Success! Project is published and running at dull-pet.surge.sh
</code></pre>

<p>The <code>domain</code> can be customised -in the above example 'dull-pet' was generated, you can replace this with something more suitable (but unique, so perhaps include your initials, the current date or something that may not be used by someone else).</p>
<p>Open a browser to inspect the running site. This is now deployed and accessible globally!</p>
  </div>
  <div  class="ui tab segment lab" data-tab="06">
    <h1>Removing Web Sites from Surge</h1>
<p>If you have published a number of sites you may want to recall what domains were generated, or perhaps remove some or all of the published pages.</p>
<p>The various commands are listed here:</p>
<ul>
<li>https://surge.sh/help&gt;</li>
</ul>
<p>To list all web sites:</p>
<pre><code>G:\dev\iot-web&gt;surge list
              email: youremail@domain.com
              token: *****************

      iot-1.surge.sh
      dull-pet.surge.sh
      highfalutin-exchange.surge.sh


G:\dev\iot-web&gt;
</code></pre>

<p>To remove (delete) a site from the server use the <code>teardown</code> command:</p>
<pre><code>C:\dev\iot-web&gt;surge teardown highfalutin-exchange.surge.sh
              email: youremail@domain.com
              token: *****************
             domain: highfalutin-exchange.surge.sh

    Success - highfalutin-exchange.surge.sh has been removed.


C:\dev\iot-web&gt;
</code></pre>
  </div>
  <div  class="ui tab segment lab" data-tab="Exercises">
    <h1>Exercises</h1>
<p>See if you can deploy your assignment 1 project using surge.</p>
<p>Here are the steps:</p>
<ol>
<li>
<p>Make sure you have the node+harp+surge packages installed on your computer. For the Mac, see step 04. For Windows, see step 03.</p>
</li>
<li>
<p>Create a new (empty) folder to contain your project. Into this folder place the following file:</p>
</li>
</ol>
<h2>harp.json</h2>
<pre><code>{
  &quot;globals&quot;: 
  {

  }
}
</code></pre>

<ol>
<li>
<p>Place your entire project into a folder called <code>public</code> inside this project folder (as we did in step 06).</p>
</li>
<li>
<p>From the command line, enter the command:</p>
</li>
</ol>
<pre><code>harp server
</code></pre>

<ol>
<li>
<p>Verify that your side it available on:</p>
<ul>
<li><a href="http://localhost:9000/">http://localhost:9000/</a></li>
</ul>
</li>
<li>
<p>Terminate the server with ^C, and then enter:</p>
</li>
</ol>
<pre><code>surge
</code></pre>

<p>This will deploy the web site:</p>
<pre><code>  project path: G:\dev\iot-web\
               size: 34 files, 2.3 MB
             domain: XXX.surge.sh
             upload: [====================] 100%, eta: 0.0s
   propagate on CDN: [====================] 100%
               plan: Free
              users: youremail@domain.com
         IP address: 192.241.214.148

    Success! Project is published and running at XXX.surge.sh
</code></pre>

<ol>
<li>
<p>Verify that the site is available on the domain. You will have the opportunity to change the domain <code>XXX</code></p>
</li>
<li>
<p>Exchange project URLs with your friends!</p>
</li>
</ol>
  </div>
<script>
$('.ui.menu .item')
  .tab({
    history: true,
    historyType: 'hash'
  })
;
</script>
   </div>



  <br><br>
  <div class="ui bottom fixed borderless menu">
    <div class="ui small item">
    <p id="footertext">
    Prepared by  Eamonn De Leastar (edeleastar@wit.ie) Dr. Brenda Mullally (bmullally@wit.ie). Except where otherwise noted, this content is licensed under a
     <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
       target="_blank">Creative Commons Attribution-NonCommercial 4.0 License
     </a>
     </p>
    </div>
  </div>    <script>

$(document).ready(function()
{
  $("img").addClass ("ui image");

  var images = $(".lab img");
  jQuery.each(images, function(i)  {
    if((images[i].alt).length > 0)
    {
      var div_img = $(document.createElement("div")).addClass("ui segment");
      $(images[i]).wrap(div_img);
      var div_label = $(document.createElement("div")).addClass("ui ribbon teal top attached label");
      div_label.append(images[i].alt);
      $(div_label).insertBefore(images[i]);
    }
  });
})    </script>

  </body>
 </html>